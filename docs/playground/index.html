<!DOCTYPE html>
<html>
<head>
    <title>Maker.js Playground</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">

    <!--

    *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    *****************************************************************************

    https://github.com/Microsoft/maker.js

    -->

    <link href="../external/codemirror/lib/codemirror.css" rel="stylesheet" />
    <link href="../external/codemirror/theme/twilight.css" rel="stylesheet" />
    <link href="../external/codemirror/addon/lint/lint.css" rel="stylesheet" />
    <link href="css/playground.css" rel="stylesheet" />
    <script src="../external/pep/pep.js"></script>
    <script src="../external/marked/marked.js"></script>
    <script src="../external/codemirror/lib/codemirror.js"></script>
    <script src="../external/codemirror/addon/active-line.js"></script>
    <script src="../external/codemirror/addon/lint/jshint.js"></script>
    <script src="../external/codemirror/addon/lint/lint.js"></script>
    <script src="../external/codemirror/addon/lint/javascript-lint.js"></script>
    <script src="../external/codemirror/mode/javascript/javascript.js"></script>
    <script src="../external/bezier-js/bezier.js"></script>
    <script src="../external/opentype/opentype.js"></script>

    <!-- Uncomment below for local development -->
    <!-- 
    <script>
        //pretend we are in node
        var module = {};

        function require(id) {
            if (id == 'graham_scan') return ConvexHullGrahamScan;
            return window[id];
        }
    </script>

    <script src="../../packages/maker.js/node_modules/clone/clone.js"></script>
    <script src="../../packages/maker.js/node_modules/graham_scan/graham_scan.min.js"></script>
    <script src="../../packages/maker.js/node_modules/kdbush/kdbush.js"></script>
    <script src="../../packages/maker.js/debug/core/maker.js"></script>
    <script src="../../packages/maker.js/debug/core/angle.js"></script>
    <script src="../../packages/maker.js/debug/core/point.js"></script>
    <script src="../../packages/maker.js/debug/core/units.js"></script>
    <script src="../../packages/maker.js/debug/core/equal.js"></script>
    <script src="../../packages/maker.js/debug/core/measure.js"></script>
    <script src="../../packages/maker.js/debug/core/path.js"></script>
    <script src="../../packages/maker.js/debug/core/break.js"></script>
    <script src="../../packages/maker.js/debug/core/paths.js"></script>
    <script src="../../packages/maker.js/debug/core/model.js"></script>
    <script src="../../packages/maker.js/debug/core/combine.js"></script>
    <script src="../../packages/maker.js/debug/core/collect.js"></script>
    <script src="../../packages/maker.js/debug/core/simplify.js"></script>
    <script src="../../packages/maker.js/debug/core/chain.js"></script>
    <script src="../../packages/maker.js/debug/core/deadend.js"></script>
    <script src="../../packages/maker.js/debug/core/expand.js"></script>
    <script src="../../packages/maker.js/debug/core/kit.js"></script>
    <script src="../../packages/maker.js/debug/core/exporter.js"></script>
    <script src="../../packages/maker.js/debug/core/importer.js"></script>
    <script src="../../packages/maker.js/debug/core/dxf.js"></script>
    <script src="../../packages/maker.js/debug/core/xml.js"></script>
    <script src="../../packages/maker.js/debug/core/svg.js"></script>
    <script src="../../packages/maker.js/debug/core/pdf.js"></script>
    <script src="../../packages/maker.js/debug/core/openjscad.js"></script>
    <script src="../../packages/maker.js/debug/core/solvers.js"></script>
    <script src="../../packages/maker.js/debug/core/fillet.js"></script>
    <script src="../../packages/maker.js/debug/core/intersect.js"></script>
    <script src="../../packages/maker.js/debug/core/layout.js"></script>
    <script src="../../packages/maker.js/debug/models/Holes.js"></script>
    <script src="../../packages/maker.js/debug/models/BoltCircle.js"></script>
    <script src="../../packages/maker.js/debug/models/BoltRectangle.js"></script>
    <script src="../../packages/maker.js/debug/models/Dogbone.js"></script>
    <script src="../../packages/maker.js/debug/models/Dome.js"></script>
    <script src="../../packages/maker.js/debug/models/RoundRectangle.js"></script>
    <script src="../../packages/maker.js/debug/models/Oval.js"></script>
    <script src="../../packages/maker.js/debug/models/OvalArc.js"></script>
    <script src="../../packages/maker.js/debug/models/BezierCurve.js"></script>
    <script src="../../packages/maker.js/debug/models/Ellipse.js"></script>
    <script src="../../packages/maker.js/debug/models/ConnectTheDots.js"></script>
    <script src="../../packages/maker.js/debug/models/Rectangle.js"></script>
    <script src="../../packages/maker.js/debug/models/Ring.js"></script>
    <script src="../../packages/maker.js/debug/models/Belt.js"></script>
    <script src="../../packages/maker.js/debug/models/Polygon.js"></script>
    <script src="../../packages/maker.js/debug/models/Square.js"></script>
    <script src="../../packages/maker.js/debug/models/Slot.js"></script>
    <script src="../../packages/maker.js/debug/models/SCurve.js"></script>
    <script src="../../packages/maker.js/debug/models/Star.js"></script>
    <script src="../../packages/maker.js/debug/models/Text.js"></script>

    <script>
        //pretend it's been required
        var makerjs = MakerJs;
    </script>
 -->

    <!-- comment out below for local development -->
    <script src="../target/js/browser.maker.js"></script>
    <script>
        var makerjs = require('makerjs');
    </script>
    <!-- comment out above for local development -->

    <script src="js/iexport.js"></script>
    <script src="js/pointer.js"></script>
    <script src="../fonts/fonts.js"></script>
    <script src="js/fontloader.js"></script>
    <script src="js/playground.js"></script>
    <script src="js/format-options.js"></script>
    <script>
        //config
        MakerJsPlayground.relativePath = '../demos/js/';
        MakerJsPlayground.fontDir = '../fonts/';
    </script>

</head>
<body class="no-notes collapse-annotation collapse-flow collapse-insert-menu">
    <a name="top"></a>

    <main>
        <header class="logo">
            <a href="http://maker.js.org/"><img src="img/m.png" /><h1>Maker.js</h1></a>

            <div id="rendering-options-top">
                <button onclick="MakerJsPlayground.toggleClassAndResize('collapse-rendering-options');">customize <span class="icon dropup">&#x25B4;</span><span class="icon dropdown">&#x25BE;</span></button>
            </div>
        </header>

        <section id="blueprint-canvas">

            <svg id="grid">
                <defs>
                    <pattern id="pattern1" x="0" y="0" width=".1" height=".1">
                        <line x1="0" y1="0" x2="0" y2="100%" class="grid-line-1"></line>
                        <line x1="0" y1="0" x2="100%" y2="0" class="grid-line-1"></line>
                    </pattern>
                    <pattern id="pattern10" x="0" y="0" width="1" height="1">
                        <line x1="0" y1="0" x2="0" y2="100%" class="grid-line-10"></line>
                        <line x1="0" y1="0" x2="100%" y2="0" class="grid-line-10"></line>
                    </pattern>
                    <pattern id="gridPattern" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse" patternTransform="translate(0,0)">
                        <rect id="gridPatternFill" fill="url(#pattern1)" width="100" height="100" x="0" y="0"></rect>
                        <rect fill="url(#pattern10)" width="100%" height="100%" x="0" y="0"></rect>
                    </pattern>
                </defs>
                <rect fill="url(#gridPattern)" width="100%" height="100%" x="0" y="0"></rect>
                <g id="crosshairs">
                    <line x1="-100%" x2="100%" y1="0" y2="0"></line>
                    <line x1="0" x2="0" y1="-100%" y2="100%"></line>
                </g>
            </svg>

            <div id="view-params">
                <div id="view" touch-action="none" class="noselect">
                    <div id="view-svg-container"></div>
                    <svg id="pointers" xmlns="http://www.w3.org/2000/svg"></svg>
                    <div id="touch-shield"></div>
                </div>
                <div id="rendering-options-menu" class="noselect">
                    <div id="params"></div>
                    <a id="params-link" href="#">save these customizations</a>
                    <div id="measurement">measurement</div>
                    <div class="view-controls">
                        <div><label><input id="check-fit-on-screen" type="checkbox" checked onclick="if (this.checked) { MakerJsPlayground.fitOnScreen(); } else { MakerJsPlayground.fitNatural(); } MakerJsPlayground.render();" /> fit on screen <span id="zoom-display" class="zoom-unit"></span></label></div>
                        <div><label><input id="check-show-origin" type="checkbox" checked onclick="MakerJsPlayground.toggleClass('collapse-origin'); MakerJsPlayground.updateZoomScale();" /> show grid <span id="grid-unit" class="zoom-unit"></span></label></div>
                        <div><label><input id="check-annotate" type="checkbox" onclick="MakerJsPlayground.toggleClass('collapse-annotation')" /> show path names</label></div>
                        <div><label><input id="check-flow" type="checkbox" onclick="MakerJsPlayground.toggleClass('collapse-flow')" /> show path flow</label></div>
                        <div id="notes-toggle"><label><input id="check-notes" type="checkbox" checked onclick="MakerJsPlayground.toggleClass('collapse-notes')" /> show notes</label></div>
                    </div>
                </div>
            </div>
            <div id="notes"></div>
        </section>

        <section id="download">

            <div id="download-select">
                <h2>Choose a file format to download your customized drawing <span class="unitless">(units will be millimeters)</span></h2>

                <button href="#" onclick="MakerJsPlayground.downloadClick(this, MakerJsPlaygroundExport.ExportFormat.Dxf);">.dxf</button>
                <button href="#" onclick="MakerJsPlayground.downloadClick(this, MakerJsPlaygroundExport.ExportFormat.Svg);">.svg</button>
                <button href="#" onclick="MakerJsPlayground.downloadClick(this, MakerJsPlaygroundExport.ExportFormat.SvgPathData);">svg path data</button>
                <button href="#" onclick="MakerJsPlayground.downloadClick(this, MakerJsPlaygroundExport.ExportFormat.Json);">json</button>
                <button href="#" onclick="MakerJsPlayground.downloadClick(this, MakerJsPlaygroundExport.ExportFormat.OpenJsCad);">openjscad</button>
                <button href="#" onclick="MakerJsPlayground.downloadClick(this, MakerJsPlaygroundExport.ExportFormat.Stl);">.stl</button>
                <button href="#" onclick="MakerJsPlayground.downloadClick(this, MakerJsPlaygroundExport.ExportFormat.Pdf);">.pdf</button>
            </div>
            
            <div id="download-options">
                
                <div data-format="Dxf" class="download-option">
                    <h2>Dxf options</h2>
                    <div class="option-block">
                        <label for="dxf-accuracy">Accuracy</label>
                        <select id="dxf-accuracy">
                            <option value="1">Integer</option>
                            <option value=".1">.1</option>
                            <option value=".01">.01</option>
                            <option value=".001">.001</option>
                            <option value=".0001" selected>.0001</option>
                            <option value=".00001">.00001</option>
                            <option value=".000001">.000001</option>
                            <option value="-1">Max</option>
                        </select>
                    </div>
                    <div class="option-block">
                        <label for="dxf-usepolyline">Use POLYLINE</label>
                        <input id="dxf-usepolyline" type="checkbox" />
                    </div>
                    <!--
                        TODO:
                        units
                    -->
                </div>

                <div data-format="Svg" class="download-option">
                    <h2>Svg options</h2>
                    <div class="option-block">
                        <label for="svg-accuracy">Accuracy</label>
                        <select id="svg-accuracy">
                            <option value="1">Integer</option>
                            <option value=".1">.1</option>
                            <option value=".01">.01</option>
                            <option value=".001">.001</option>
                            <option value=".0001" selected>.0001</option>
                            <option value=".00001">.00001</option>
                            <option value=".000001">.000001</option>
                            <option value="-1">Max</option>
                        </select>
                    </div>
                    <!--
                        TODO: Many options 
                    -->
                </div>

                <div data-format="SvgPathData" class="download-option">
                    <h2>Svg options</h2>
                    <div class="option-block">
                        <label for="svgpathdata-accuracy">Accuracy</label>
                        <select id="svgpathdata-accuracy">
                            <option value="1">Integer</option>
                            <option value=".1">.1</option>
                            <option value=".01">.01</option>
                            <option value=".001">.001</option>
                            <option value=".0001" selected>.0001</option>
                            <option value=".00001">.00001</option>
                            <option value=".000001">.000001</option>
                            <option value="-1">Max</option>
                        </select>
                    </div>
                    <div class="option-block">
                        <label for="svgpathdata-origin">Origin</label>
                        <select id="svgpathdata-origin">
                            <option value="top" selected>Topmost Y of drawing</option>
                            <option value="zero">Same as playground</option>
                        </select>
                    </div>
                    <div class="option-block">
                        <label for="svgpathdata-fillrule">Fill-rule</label>
                        <select id="svgpathdata-fillrule">
                            <option value="evenodd" selected>evenodd</option>
                            <option value="nonzero">nonzero</option>
                        </select>
                    </div>
                    <!-- TODO: Layer order -->
                </div>
                
                <div data-format="Json" class="download-option">
                    <h2>Json options</h2>
                    <div class="option-block">
                        <label for="json-accuracy">Accuracy</label>
                        <select id="json-accuracy">
                            <option value="1">Integer</option>
                            <option value=".1">.1</option>
                            <option value=".01">.01</option>
                            <option value=".001">.001</option>
                            <option value=".0001" selected>.0001</option>
                            <option value=".00001">.00001</option>
                            <option value=".000001">.000001</option>
                            <option value="-1">Max</option>
                        </select>
                    </div>
                    <div class="option-block">
                        <label for="json-indent">Indentation</label>
                        <select id="json-indent">
                            <option value="0">None</option>
                            <option value="2" selected>2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                </div>

                <div data-format="OpenJsCad" class="download-option">
                    <h2>OpenJsCad options</h2>
                    <div class="option-block">
                        <label for="openjscad-name">Function name</label>
                        <input id="openjscad-name" type="text" value="main" />
                    </div>
                    <div class="option-block">
                        <label for="openjscad-indent">Indentation</label>
                        <select id="openjscad-indent">
                            <option value="0">None</option>
                            <option value="2" selected>2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                    <div class="option-block">
                        <label for="openjscad-accuracy">Accuracy</label>
                        <select id="openjscad-accuracy">
                            <option value="1">Integer</option>
                            <option value=".1">.1</option>
                            <option value=".01">.01</option>
                            <option value=".001" selected>.001</option>
                            <option value=".0001">.0001</option>
                            <option value=".00001">.00001</option>
                            <option value=".000001">.000001</option>
                            <option value="-1">Max</option>
                        </select>
                    </div>
                    <div class="option-block">
                        <label for="openjscad-facetsize">Arc Facet size</label>
                        <select id="openjscad-facetsize">
                            <option value=".01">.01</option>
                            <option value=".05">.05</option>
                            <option value=".1">.1</option>
                            <option value=".25">.25</option>
                            <option value=".5">.5</option>
                            <option value="1">1</option>
                            <option value="1.5">1.5</option>
                            <option value="2">2</option>
                            <option value="2.5" selected>2.5</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="10">10</option>
                        </select>
                    </div>
                    <div class="option-block">
                        <label for="openjscad-extrusion">Extrusion</label>
                        <input id="openjscad-extrusion" type="number" value="1" min="0" />
                    </div>
                    <!-- 
                        TODO:
                        Indentation,
                        flavor: Classic or Node
                     -->
                </div>

                <div data-format="Stl" class="download-option">
                    <h2>Stl options</h2>
                    <div class="option-block">
                        <label for="stl-facetsize">Arc Facet size</label>
                        <select id="stl-facetsize">
                            <option value=".01">.01</option>
                            <option value=".05">.05</option>
                            <option value=".1">.1</option>
                            <option value=".25">.25</option>
                            <option value=".5">.5</option>
                            <option value="1">1</option>
                            <option value="1.5">1.5</option>
                            <option value="2">2</option>
                            <option value="2.5" selected>2.5</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="10">10</option>
                        </select>
                    </div>
                    <div class="option-block" id="stl-extrusion-block">
                        <label for="stl-extrude">Extrusion amount</label>
                        <input type="number" id="stl-extrude" value="1" />
                    </div>
                </div>

                <div data-format="Pdf" class="download-option">
                    <h2>Pdf options</h2>
                    <div class="option-block">
                        <label for="pdf-toptmargin">Top margin</label>
                        <select id="pdf-topmargin">
                            <option value="0">0</option>
                            <option value=".25">.25</option>
                            <option value=".5">.5</option>
                            <option value="1" selected>1</option>
                        </select>
                    </div>
                    <div class="option-block">
                        <label for="pdf-leftmargin">Left margin</label>
                        <select id="pdf-leftmargin">
                            <option value="0">0</option>
                            <option value=".25">.25</option>
                            <option value=".5">.5</option>
                            <option value="1" selected>1</option>
                        </select>
                    </div>
                    <!--
                        stroke color
                        stroke thickness
                        stroke style
                        layers
                    -->
                </div>

                <button class="generate" onclick="MakerJsPlayground.getFormatOptions()">generate</button>
                <button class="close" onclick="MakerJsPlayground.toggleClass('download-options')">cancel</button>
            </div>

            <div id="download-generating">
                <h2>Generating your customized drawing...</h2>

                <button onclick="MakerJsPlayground.cancelExport()">cancel</button>
                <div id="download-progress"></div>
            </div>

            <div id="download-error">
                <h2>There was an error generating your file</h2>
                <div id="download-error-message"></div>
                <button class="close" onclick="MakerJsPlayground.toggleClass('download-error')">close</button>
            </div>

            <div id="download-ready">
                <h2>Your customized drawing file is ready for download</h2>

                <span id="download-link-container"></span>
                <span>
                    <button class="back" onclick="MakerJsPlayground.toggleClass('download-ready');MakerJsPlayground.toggleClass('download-options')">back</button>
                </span>
                <span>
                    <button class="close" onclick="MakerJsPlayground.toggleClass('download-ready')">close</button>
                </span>
                <div id="download-preview-container">
                    <textarea id="download-preview" rows="8" readonly></textarea>
                </div>
                <div class="onscreen-help">
                    If your browser does not support the download button above, <button onclick="MakerJsPlayground.copyToClipboard()">copy the text above</button> and paste into a new text file named <b id="download-filename">myfile.txt</b> on your computer.
                </div>
            </div>

        </section>

        <section class="editor">
            <div>
                <div class="code-header">
                    <span>
                        JavaScript <span id="code-editor-title">code editor</span>
                    </span>
                    <div id="insert-top">
                        <button onclick="MakerJsPlayground.loadInsertPage()" title="Insert (CTRL + i)">Insert <span class="icon dropup">&#x25B4;</span><span class="icon dropdown">&#x25BE;</span></button>
                        <div id="insert-menu"></div>
                    </div>
                    <button class="run" onclick="MakerJsPlayground.runCodeFromEditor()" title="Run (CTRL + Enter)">&nbsp;&#x25BA; Run&nbsp;</button>
                    <span class="status"></span>
                </div>

                <a name="code"></a>

                <pre id="init-javascript-code">
var makerjs = require('makerjs');
this.paths = {
    head: new makerjs.paths.Circle([0, 0], 90),
    eye: new makerjs.paths.Circle([25, 25], 10),
    mouth: new makerjs.paths.Arc([0, 0], 50, 225, 315),
    wink: new makerjs.paths.Line([-35, 20], [-15, 20])
};
this.notes = '# Welcome to the Maker.js playground \n You can edit the JavaScript code, then click **Run** (or CTRL + Enter) to see your drawing.';
//press enter here to add more blank lines
</pre>
            </div>
        </section>

        <div class="scroll-nav-links">
            <span>jump to</span>
            <span><a href="#code" onclick="document.querySelector('a[name=code]').scrollIntoView();return false;">code</a></span>
            <span><a href="#top" onclick="document.querySelector('a[name=top]').scrollIntoView();return false;">top</a></span>
        </div>

        <div class="about">

            <blockquote>
                The <b>Maker.js Playground</b> is a sample app demonstrating the features of the Maker.js core library.
                You can build your own apps using Maker.js, or it can be used command-line style with <a href="https://nodejs.org/" target="_blank">Node.js</a>.
            </blockquote>

            <h4>Credits:</h4>

            <ul>
                <li>Bezier curve calculation by <a href="https://pomax.github.io/bezierjs/" target="_blank">Bezier.js</a></li>
                <li>Font file parsing by <a href="http://opentype.js.org/" target="_blank">Opentype.js</a></li>
                <li>JavaScript editor by <a href="https://codemirror.net/" target="_blank">CodeMirror</a></li>
                <li>Markdown rendering by <a href="https://github.com/chjj/marked" target="_blank">Marked</a></li>
                <li>3D generation by <a href="https://joostn.github.io/OpenJsCad/" target="_blank">OpenJSCAD</a></li>
                <li>PDF generation by <a href="http://pdfkit.org/" target="_blank">PDFKit</a></li>
                <li>Multitouch pointer events polyfill by <a href="https://github.com/jquery/PEP" target="_blank">Jquery PEP</a></li>
                <li>Binary data polyfill by <a href="https://github.com/inexorabletash/text-encoding" target="_blank">text-encoding</a></li>
                <li>Fonts provided by <a href="https://fonts.google.com/" target="_blank">Google Fonts</a></li>
            </ul>
        </div>

        <footer>
            <a href="https://github.com/Microsoft"><img src="img/microsoft.png" height="16" /> Open source, from Microsoft with love.</a> 
            This site does not collect any personal information or use cookies. <a href="http://aka.ms/privacy">Microsoft Privacy Statement</a> ©2015-2019 Microsoft
        </footer>

    </main>

</body>
</html>
